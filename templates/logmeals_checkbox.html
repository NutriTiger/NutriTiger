<!--==============================================================-->
<!-- logmeals.html                                          -->
<!--==============================================================-->
<div class="card-body" id="menu-items" style="display: none;">
    {% set ns = namespace(c = 0) %}
    {% for item in data %}
        {% set ooo_loop = loop %}
        <div class = "menu-items-content" style="display: none;" id="{{ item.dhall[:2] }}-{{ item.mealtime }}">
        {% for category, foods in item.data.items() %}
            {% set oo_loop = loop %}
                {% for food, code in foods.items() %}
                    {% if nutrition_info[ns.c]['calories'] != "" %}
                        <div class="form-check">
                            {% set checkbox_id = ooo_loop.index ~ '-' ~ oo_loop.index ~ '-' ~ loop.index %}
                            <input type="checkbox" style="border: 1px solid black;" class="form-check-input" id="checkbox-{{ checkbox_id }}" 
                                data-usda="false"
                                data-recid="{{ code }}" data-location="{{ item.dhall }}" data-mealtime="{{ item.mealtime }}"
                                data-mealname="{{ food }}"
                                data-servingsize="{{ nutrition_info[ns.c]['servingsize'] }}"
                                data-cals="{{ nutrition_info[ns.c]['calories'] }}"
                                data-carbs="{{ nutrition_info[ns.c]['carbs'] }}"
                                data-prots="{{ nutrition_info[ns.c]['proteins'] }}"
                                data-fats="{{ nutrition_info[ns.c]['fats'] }}"
                                onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="checkbox-{{ checkbox_id }}">{{ food }}</label>
                            <p id="nf-{{ checkbox_id }}" class="nutrition-container">
                                <span class="nutrition-fact">Serving Size: {{ nutrition_info[ns.c]['servingsize'] }}</span>
                                <span class="nutrition-fact">Calories: {{ nutrition_info[ns.c]['calories'] }}</span>
                                <span class="nutrition-fact">Proteins: {{ nutrition_info[ns.c]['proteins'] }}g</span>
                                <span class="nutrition-fact">Carbs: {{ nutrition_info[ns.c]['carbs'] }}g</span>
                                <span class="nutrition-fact">Fats: {{ nutrition_info[ns.c]['fats'] }}g</span>
                            </p>
                        </div>
                    {% endif %}
                    {% set ns.c = ns.c + 1 %}
                {% endfor %}
        {% endfor %}
        </div>
    {% endfor %}
    <p id="select" class="text-center">Please select a dining hall from the dropdown menu.
        <a class="tool-tip" data-bs-toggle="tooltip" data-bs-placement="auto" title="" data-bs-original-title="Please note that at this time only food items with nutritional information provided to us by Campus Dining are displayed and able to be logged. If you can not find an item, consider searching the generic USDA database for other foods.">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
            </svg>
        </a>
    </p>
    <p id="noDataMessage" class="text-center" style="display: none;">No data available for this source.</p>
</div>

<script>
    /* tooltips for info */
	const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
	const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))

</script>


<div class="card-body" id="custom-food-items" style="display: none;">
    
    {% if custom_data %}
        <div class="card-body" id="custom-food-items">
            <div class="row">
                {% for item in custom_data %}
                    <div class="col-md-12 custom-items-content" data-page="{{ loop.index0 // 7 + 1 }}">
                        <div class="form-check">
                            {% set checkbox_id = item.access ~ '-' ~ item.recipeid %}
                            <input type="checkbox" style="border: 1px solid black;" class="form-check-input" id="checkbox-{{ checkbox_id }}"
                                data-usda="false" data-recid="{{ item.recipeid }}" data-location="Custom Food" data-mealtime="N/A"
                                data-mealname="{{ item.mealname }}" data-servingsize="{{ item.servingsize }}"
                                data-cals="{{ item.calories }}" data-carbs="{{ item.carbs }}"
                                data-prots="{{ item.proteins }}" data-fats="{{ item.fats }}"
                                onchange="handleCheckboxChange(this)" onkeypress="changeCheckbox(this)">
                            <label class="form-check-label" for="checkbox-{{ checkbox_id }}">{{ item.mealname }}</label>
                            <p id="nf-{{ checkbox_id }}">
                                Serving Size: {{ item.servingsize }} Calories: {{ item.calories }} Proteins: {{ item.proteins }}g Carbs: {{ item.carbs }}g Fats: {{ item.fats }}g
                            </p>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <!-- Pagination Controls -->
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-center" id = "pagination-custom">
                    
                    {% for i in range(1, total_pages + 1) %}
                        <li class="page-item {% if i == 1 %}active{% endif %}" onclick="handleCustomPageChange({{ i }})">
                            <a class="page-link" href="javascript:void(0);">{{ i }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </nav>
        </div>
    {% else %}
        <p id="noDataCustomMessage" class="text-center">You have not added any Custom Foods yet.</p>
    {% endif %}

</div>

<div class="card-body" id="tutorial-food-items" style="display: none;">
    <div class = "tutorial-items-content">
        <div class="form-check">
            <input type="checkbox" style="border: 1px solid black;" class="form-check-input" id="checkbox-tutorial-1" 
                data-usda="false"
                data-recid="tutorial-1" data-location="Custom Food" data-mealtime="N/A"
                data-mealname="Example Food"
                data-servingsize="1"
                data-cals="630"
                data-carbs="20"
                data-prots="31"
                data-fats="18"
                onchange="handleCheckboxChange(this)"
                onkeypress="changeCheckbox(this)">
            <label class="form-check-label" for="checkbox-tutorial-1">Example Food</label>
            <p id="nf-tutorial-1" class="nutrition-container">
                <span class="nutrition-fact">Serving Size: 1</span>
                <span class="nutrition-fact">Calories: 630</span>
                <span class="nutrition-fact">Proteins: 31g</span>
                <span class="nutrition-fact">Carbs: 20g</span>
                <span class="nutrition-fact">Fats: 18g</span>
            </p>
        </div>
    </div>
</div>